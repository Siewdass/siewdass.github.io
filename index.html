<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Blockchain Demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <style>
			body {
				background: #6c757d;
			}
			.list-group-item {
				color: white;
				background: #343a40;
			}
			.navbar {
				background: #343a40 !important;
				margin-bottom: 20px;
			}
			.navbar-brand {
				color: white;
			}
		</style>
  </head>
<body>
	<nav class="navbar navbar-expand-lg navbar-light bg-dark">
		<div class="container">
			<a class="navbar-brand mx-auto" href="#">Blockchain Demo</a>
		</div>
	</nav>

	<div class="container">
		<ul class="list-group">
			<li id="buyers" class="list-group-item">Buyers: 0</li>
			<li id="sellers" class="list-group-item">Sellers: 0</li>
		</ul>
	</div>

	<script>
	const b = document.getElementById( 'buyers' )
	const s = document.getElementById( 'sellers' )

	const btc = new WebSocket( 'wss://stream.binance.com:9443/ws/btcusdt@trade/btcbusd@trade' )
	let buyers = 0, sellers = 0
	btc.onmessage = function( message ) {
		const { m } = JSON.parse( message.data ) 
		if ( m ) {
			buyers += 1
			b.innerHTML = `Buyers: ${buyers}`
		} else {
			sellers += 1
			s.innerHTML = `Sellers: ${sellers}`
		} 
	}
	</script>
</body>
</html>
